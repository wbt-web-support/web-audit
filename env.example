# SaaS Web Audit Platform Environment Configuration

# ============================================================================
# SYSTEM CONFIGURATION
# ============================================================================
NODE_ENV=production
LOG_LEVEL=info

# ============================================================================
# DYNAMIC SCALING CONFIGURATION
# ============================================================================
# Maximum number of users the system should handle
MAX_USERS=500

# Resource allocation per user
QUEUE_SIZE_PER_USER=2
WORKERS_PER_USER=0.1
CONCURRENCY_PER_WORKER=3
MEMORY_PER_WORKER=256
CPU_PER_WORKER=0.1

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/web_audit_saas
DB_MAX_CONNECTIONS=20
DB_CONNECTION_TIMEOUT=30000
DB_QUERY_TIMEOUT=60000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL=redis://localhost:6379
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECTION_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# ============================================================================
# QUEUE CONFIGURATION
# ============================================================================
QUEUE_DEFAULT_CONCURRENCY=5
QUEUE_DEFAULT_MAX_WORKERS=10
QUEUE_DEFAULT_SIZE=1000
QUEUE_DEFAULT_RETRY_ATTEMPTS=3
QUEUE_DEFAULT_RETRY_DELAY=5000
QUEUE_CLEANUP_INTERVAL=300000

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_CLEANUP_INTERVAL=300000
RATE_LIMIT_MEMORY_LIMIT=1000000

# ============================================================================
# TENANT CONFIGURATION
# ============================================================================
MAX_TENANTS=1000
DEFAULT_PLAN=free
TENANT_CACHE_TIMEOUT=300000
USAGE_RESET_DAY=1

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
JWT_SECRET=your-secure-jwt-secret-key-here
JWT_EXPIRY=24h
BCRYPT_ROUNDS=12
CORS_ORIGINS=http://localhost:3000,https://your-domain.com
ALLOWED_HOSTS=localhost,your-domain.com

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
MONITORING_ENABLED=true
METRICS_INTERVAL=60000
HEALTH_CHECK_INTERVAL=30000
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85
ALERT_DISK_THRESHOLD=90
ALERT_ERROR_RATE_THRESHOLD=5

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================
STORAGE_PROVIDER=local
STORAGE_LOCAL_PATH=./uploads
S3_BUCKET=your-s3-bucket
S3_REGION=us-east-1
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
EMAIL_PROVIDER=smtp
EMAIL_FROM=noreply@web-audit.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SENDGRID_API_KEY=your-sendgrid-api-key
SES_REGION=us-east-1

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=1000
WEBHOOK_TIMEOUT=30000
WEBHOOK_SIGNATURE_SECRET=webhook-secret-key

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_MULTI_TENANCY=true
FEATURE_QUEUE_SYSTEM=true
FEATURE_RATE_LIMITING=true
FEATURE_MONITORING=true
FEATURE_WEBHOOKS=true
FEATURE_ANALYTICS=true
FEATURE_API_VERSIONING=true

# ============================================================================
# ANALYSIS CONFIGURATION
# ============================================================================
# Disable screenshot generation completely (set to 'true' to disable)
# This will skip all screenshot generation and use HTML-only analysis
DISABLE_SCREENSHOTS=false

# Animation handling for screenshots
# Set to 'true' to wait for animations and dynamic content (slower but more accurate)
# Set to 'false' for faster screenshots (may miss animated content)
WAIT_FOR_ANIMATIONS=true

# Viewport simulation for lazy-loaded content
# Set to 'true' to simulate scrolling through entire page (catches viewport-triggered content)
# Set to 'false' for faster screenshots (may miss lazy-loaded sections)
SIMULATE_VIEWPORT_SCROLL=true

# Screenshot timeout in milliseconds (default: 15000)
SCREENSHOT_TIMEOUT=15000

# API Keys for external services
GEMINI_API_KEY=your-gemini-api-key
PAGESPEED_API_KEY=your-pagespeed-insights-api-key

# ============================================================================
# MONITORING STACK CONFIGURATION
# ============================================================================
GRAFANA_PASSWORD=admin
PROMETHEUS_RETENTION_TIME=200h
ELASTICSEARCH_HEAP_SIZE=512m

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================
COMPOSE_PROJECT_NAME=web-audit-saas
DOCKER_BUILDKIT=1
